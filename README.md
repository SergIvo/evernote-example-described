# evernote-example
Проект представляет из себя набор скриптов, предназначенных для взаимодействия с Evernote API. Отдельные скрипты приложения могут быть использованы для создания заметок в Evernote, получения заметок из указанного блокнота, а также идентификаторов блокнотов. Описания приведены ниже.

Перед использованием скриптов необходимо установить зависимости из файла `requirements.txt`:
```
pip install -r requirements.txt
```
## list_notebooks.py
Данный скрипт предназначен для получения идентификатора всех ноутбуков пользователя (т.е. блокнотов, в которых хранятся отдельные заметки). Для его запуска необходим токен разработчика Evernote. Способ его получения описан [здесь](https://dev.evernote.com/doc/articles/authentication.php). Токен нужно добавить в переменные окружения:
```
export EVERNOTE_PERSONAL_TOKEN=<токен разработчика Evernote>
```
Запустить скрипт можно следующей командой:
```
python2 list_notebooks.py
```
После запуска скрипта в консоль будут выведены идентификаторы и названия имеющихся у пользователя ноутбуков:
```
1df134a6-9c4a-2d3f-a5c6-473d2e8da371 - Первый блокнот
1f1c30b3-64c6-41c1-a0e5-a17c5ad83a68 - Дневник
```
## dump_inbox.py
Скрипт предназначен для вывода текста заметок, содержащихся в блокноте для несортированных заметок (или другом указанном). Для запуска скрипта также необходим токен разработчика Evernote, и идентификатор блокнота, заметки из которого необходимо вывести. Получить идентификатор можно вместе с идентификаторами всех блокнотов пользователся с помощью скрипта `list_notebooks.py`, затем его нужно добавить в переменные окружения:
```
export INBOX_NOTEBOOK_GUID=<идентификатор нужного блокнота>
```
При запуске скрипту можно передать в качестве аргумента количество заметок, которые нужно вывести. По умолчанию оно ограничено десятью последними заметками. Запустить скрипт можно следующей командой:
```
python2 dump_inbox.py number <число заметок>
```
Скрипт выведет содержимое заметок, в порядке возрастания их давности, в следующем виде:
```
--------- 1 ---------


Последняя заметка

--------- 2 ---------


Предудыщая заметка

--------- 3 ---------


Еще более старая заметка

```
## add_note2journal.py
Принимает в качестве аргумента дату в формате "год-месяц-день", например `2022-10-29`, либо количество дней, считая от текущей даты в днях, например `+5`, т.е. через пять дней, или `-3`, т.е. три дня назад. В случае, если в качестве аргумента будут переданы любые другие данные, скрипт выдаст следующую ошибку:
```
Not a valid date: 'переданное значение аргумента'.
```
Если не передавать аргументов вообще, скрипт будет использовать текущую дату. Скрипт создаст в указанном блокноте Evernote пользователя заметку, в заголовке которой будет указана текущая дата, если скрипт был запущен без аргументов, либо дата, указанная в качестве аргумента. Заметка создатеся по шаблону, который представляет из себя уже имеющуюся у пользователя заметку Evernote. При этом заголовок заметки-шаблона должен иметь следующий вид:
```
{date} {dow} # Произвольный текст
```
Значения `date` и `dow` скрипт заменяет соответственно на дату и день недели. Для работы скрипта необходимо, чтобы среди переменных окружения были указаны токен разработчика Evernote, идентификатор заметки-шаблона и идентификатор блокнота, в который скрипт будет добавлять новую заметку:
```
export JOURNAL_TEMPLATE_NOTE_GUID=<идентификатор заметки-шаблона>
export JOURNAL_NOTEBOOK_GUID=<идентификатор блокнота, в который будет добавлена заметка>
```
Запустить скрипт можно следующей командой:
```
python2 add_note2journal.py date <год-месяц-день или +-количество дней>
```
После запуска скрипт выведет в косноль дату и день недели, которые будут указаны в заголовке заметки, а затем сам заголовок, в следующем виде:
```
Title Context is:
{
    "date": "2022-11-02", 
    "dow": "среда"
}
Note created: 2022-11-02 среда
Done
```
